#TODO: Is it worth to reformat this file as Markdown?

#TODO: Perhaps it would make sense to move the contents of this file to the
top-level REAMDE file, because otherwise the information in this file is not
immediately available and required some digging in the source tree.

INSIGHT TOOLKIT SOFTWARE GUIDE BUILD OVERVIEW

The generation of the ITK Software Guide is orchestrated as a CMake superubild
process. CMakeLists.txt files are placed in the directories involved on the
build process. As any other CMake-managed process, the results of the build
process are put in a binary tree corresponding to the source tree.

The following dependencies are required to build ITK Software Guide on Linux or
Windows platforms:

 - Git
 - Python
 - ImageMagick
   Windows installer can be found here: http://www.imagemagick.org/.
 - LaTeX and BibTeX
   See the preamble of the LaTeX/00-SoftwareGuide.tex file for the full list of
   required LaTeX packages. Among these packages Minted package for syntax
   highlighting in its turn depends on a Python package Pygments. Instructions
   for installing Minted and Pygments packages on Windows are available here:
   https://minted.googlecode.com/files/minted.pdf.
 - dvips, ps2pdf
   While on Linux platforms these tools are usually included with most
   distributions, on Windows platforms they are usually included in MikTex Latex
   distribution.

ITK Software Guide is generated with Latex by using input from a variety of
source code files and images:

 1. LaTeX files found in SoftwareGuide/LaTeX
 2. JPEG, PNG and EPS files in SoftwareGuide/Art
 3. PNG files generated as the result of compiling and running the examples
    included in the ITK source code
 3. ITK examples source code cxx files where the comments delimited with
    BeginLaTeX, EndLaTeX and BeginCodeSnippet, EndCodeSnippet have been written
    specifically to be included in the ITK Software Guide; the regular LaTeX
    files in SoftwareGuide/LaTeX include the LaTeX files generated from the ITK
    examples source code.

Following is a brief description of the build process:

 1. The source code of ITK 4 is downloaded and built (including ITK examples)
    in the binary output directory.
 2. JPEG and PNG files in the Art directory are converted to EPS using
    ImageMagic tools; the resulting EPS files are saved in the Art directory in
    the binary output directory.
 3. PNG files are generated by running ITK examples and converted to EPS using
    MagicTools; the resulting EPS files are saved in Art/Generated directory of
    the binary output directory.
 4. A Python script SoftwareGuide/ParseCxxExamples.py is invoked to extract the
    comments in the ITK examples source file delimited with BeginLaTeX, EndLaTeX
    and BeginCodeSnippet, EndCodeSnippet and generate LaTeX files which are
    copied into the Examples subdirectory of the binary output directory.
 5. The top-level LaTeX file SoftwareGuide/LaTeX/00-SoftwareGuide.tex is
    compiled with LaTeX, followed by running BibTeX to generate
    00-SoftwareGuide.dvi file in the binary output directory. The third DVI file
    is then converted to PDF.

TODO: Perhaps the generation of the DVI file with correct cross-referencing can
be made easier as it is suggested here:
http://www.cmake.org/Wiki/CMakeUserUseLATEX.

CONFIGURING AND BUILDING WITH CMAKE

TODO: This section seems so trivial; anyone attempting to build the ITK
Softwrare Guide would probably be fairly clear on how to use CMake, no?

Following is the description how to configure and build ITK Software Guide using
CMake:

 1. Run cmake-gui and specify input and binary output directories.
    Alternatively, create the binary output directory and run
    "ccmake source_dir" where source_dir is the full path of the
    ITKSorftwareGuide directory.
 2. Configure and generate the project for the target platform.
 3. Build SuperBuild_ITKSoftwareGuide project as appropriate for the target
    platform.

TROUBLESHOOTING

 1. Build process will fail if CMake is unable to locate any of the
    dependencies. In this case a close examination of the error messages might
    provide a clue as to which dependency is failing.

TODO: The following items (2 and 3) seem out of date. In general it should be a
lot more straightforward to generate correct cross-referencing for citations and
indexing in a LaTeX document. It is being looked into currently in order to
simplify the generation of the final PDF file.
 2. Due to unavoidable circular dependencies in LaTeX it may be required from
    time to time to build manually some components. In particular, the index
    generation and the bibliography can lead to circular dependencies. The
    reason is that first, LaTeX needs to parse the tex code in order to collect
    citation references and to collect index entries. The index entries are
    stored in a file called SoftwareGuide.idx and put in the LaTeX subdirectory
    of the binary directory. Then the program makeindex is used to generate a
    SoftwareGuide.ind which is the final database of index entries. The
    circularity arises because the file SoftwareGuide.ind is included in the
    main 00-SoftwareGuide.tex file. The way to avoid the circularity is to first
    comment out the inclusion of 00-SoftwareGuide.ind on the file
    00-SoftwareGuide.tex, run LaTeX three times, to resolve all the references,
    then run makeindex and finally include SoftwareGuide.ind back into
    00-SoftwareGuide.tex.

    A similar circularity arises with bibliographic references since BibTeX is
    used here. The actual bibliographic reference is stored in
    LaTeX/Insight.bib. The citations are collected in the first LaTeX passes and
    stored in the 00-SoftwareGuide.aux file. Then the "BibTeX" program is used
    to generate a SoftwareGuide.bbl file that is finally included by LaTeX.

    Once the system has been build the first time, the circularity shouldn't be
    a major issue. It is important however to keep in mind that CMake will only
    run LaTeX once, while it should in fact be executed in several passes. The
    result of which is that sometimes the full set of references and citations
    may not be updated.

TODO: The following issue is related to the previous issue and it is still not
resolved properly on Windows, not sure about Linux.
 3. The pdf built fine... I cannot see the references or the Index.
    Rerun the project "SoftwareGuideLaTeX" twice.
    on unix, run "make && make" again

    LaTeX has some cross-referencing issues which require the dependencies to be
    generated prior to build.

 4. Frustrated by the build taking a long time to complete
   ... no solution here. :)
