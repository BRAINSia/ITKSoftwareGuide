\chapter{Filtering}

This chapter introduces the most commonly used filters in the toolkit.  Most of
these filters are intended to process images. They will accept one or more
images as input and will produce one or more images as output. Insight is based
on a data pipeline architecture in which the output of one filter is passed as
input to another filter.


\section{Thresholding}
\label{sec:ThresholdingFiltering}

\subsection{Binary Thresholding}
\label{sec:BinaryThresholdingImageFilter}

\input BinaryThresholdImageFilter.tex

\subsection{Thresholding}
\label{sec:ThresholdingImageFilter}

\input ThresholdImageFilter.tex



\section{Casting}
\label{sec:CastingImageFilters}

\input CastingImageFilters.tex


\section{Gradients}
\label{sec:GradientFiltering}

Computation of gradients is a fairly common operation in image processing. The
term is sometimes loosely used to refer the gradient vectors or the magnitude
of this gradient. Insight filters attempt to reduce this ambiguity by including
the \emph{magnitude} term when appropriate. Insight provides filters for
computing both the image of gradient vectors and the image of magnitudes.

\subsection{Gradient Magnitude}
\label{sec:GradientMagnitudeImageFilter}

\input GradientMagnitudeImageFilter.tex

\subsection{Gradient Magnitude With Smoothing}
\label{sec:GradientMagnitudeRecursiveGaussianImageFilter}

\input GradientMagnitudeRecursiveGaussianImageFilter.tex




\section{Neighborhood Filters}
\label{sec:NeighborhoodFilters}

The concept locality is frequently encountered in image processing on the form
of filters that compute every output pixel using information from a reduced
region on the neighborhood of the input pixel. The classical form of this
filters are the $3 \times 3$ filters in 2D images. Convolution masks based on
these neighborhoods could perform diverse tasks ranging from noise reduction,
to differential operations, to mathematical morphology.

The Insight toolkit implements an elegant approach for the computation of these
family of filters. The input image is visited by a special iterator called the
\code{SmartNeighborhoodIterator}. This iterator is capable of moving over all
the pixels in an image and for each position it can address the pixels in a
local neighborhood. Operators can be defined in order to specify what
algorithmic operation must be performed on the neighborhood of the input pixel
to compute the value of the output pixel. The following section describes some
of the commonly used filters that take advantage of this construction.  

\subsection{Mean Filter}
\label{sec:MeanFilter}

\input MeanImageFilter.tex

\subsection{Median Filter}
\label{sec:MedianFilter}

\input MedianImageFilter.tex


\subsection{Mathematical Morphology}
\label{sec:MathematicalMorphology}

Mathematical morphology has proved to be a a powerful resource for image
processing and analysis. Insight implements mathematical morphology filters
using the approach of NeighborhoodIterators and NeighborhoodOperators. Two
basic flavors of filters are available in the toolkit, the ones that operate on
binary images and the ones that operate on grayscale images. 

\subsubsection{Binary Filters}
\label{sec:MathematicalMorphologyBinaryFilters}

\input MathematicalMorphologyBinaryFilters.tex


\subsubsection{Grayscale Filters}
\label{sec:MathematicalMorphologyGrayscaleFilters}

\input MathematicalMorphologyGrayscaleFilters.tex




\section{Smoothing Filters}
\label{sec:SmoothingFilters}

Real image data has a level of uncertainty that is manifested on the
variability of measures assigned to pixels. This is usually interpreted as
noise and considered an undesirable component of the image data. This section
describes several methods that can be applied to reduce noise on images.

\subsection{Blurring}
\label{sec:BlurringFilters}

lurring is the traditional approach for removing noise from images. It it
usally implemented in the form of a convolution with a kernel. The effect of
this operation on the image spectrum is to attenuate high spatial frequencies.
Different kernels attenuate frequencies in different ways. One of the most
commonly used kernels is the Gaussian. Two implementations of gaussian
smoothing are available in the toolkit. The first one is based on a traditional
convolution while the other is based on the application of IIR filters that
approximate the convolution with a Gaussian. 

\subsubsection{Discrete Gaussian}
\label{sec:DiscreteGaussianImageFilter}

\input DiscreteGaussianImageFilter.tex


\subsubsection{Binomial Blurring}
\label{sec:BinomialBlurImageFilter}

\input BinomialBlurImageFilter.tex



\subsection{Edge Preserving Smoothing}
\label{sec:EdgePreservingSmoothingFilters}

\subsubsection{Introduction to Anisotropic Diffusion}
\input AnisotropicDiffusionFiltering.tex

\subsubsection{Curvature Flow}
\label{sec:CurvatureFlowImageFilter}

\input CurvatureFlowImageFilter.tex


\subsubsection{MinMaxCurvature Flow}
\label{sec:MinMaxCurvatureFlowImageFilter}

\input MinMaxCurvatureFlowImageFilter.tex



\subsubsection{BinaryMinMaxCurvature Flow}
\label{sec:BinaryMinMaxCurvatureFlowImageFilter}

\input BinaryMinMaxCurvatureFlowImageFilter.tex


\subsubsection{Gradient Anisotropic Diffusion}
\label{sec:GradientAnisotropicDiffusionImageFilter}

\input GradientAnisotropicDiffusionImageFilter.tex



\subsubsection{Curvature Anisotropic Diffusion}
\label{sec:CurvatureAnisotropicDiffusionImageFilter}

\input CurvatureAnisotropicDiffusionImageFilter.tex


\subsubsection{Bilateral Filter}
\label{sec:BilateralImageFilter}

\input BilateralImageFilter.tex



\subsection{Edge Preserving Smoothing in Vector Images}
\label{sec:VectorAnisotropicDiffusion}

Anisotropic diffusion can also be applied to images whose pixels are vectors.
In this case the diffusion is computed independently for each vector component.
The following classes implement versions of anisotropic diffusion on vector images.


\subsubsection{Vector Gradient Anisotropic Diffusion}
\label{sec:VectorGradientAnisotropicDiffusionImageFilter}

\input VectorGradientAnisotropicDiffusionImageFilter.tex

\subsubsection{Vector Curvature Anisotropic Diffusion}
\label{sec:VectorCurvatureAnisotropicDiffusionImageFilter}

\input VectorCurvatureAnisotropicDiffusionImageFilter.tex



\subsection{Edge Preserving Smoothing in Color Images}
\label{sec:ColorAnisotropicDiffusion}

\subsubsection{Gradient Anisotropic Diffusion}
\label{sec:ColorGradientAnisotropicDiffusion}

\input RGBGradientAnisotropicDiffusionImageFilter.tex

\subsubsection{Curvature Anisotropic Diffusion}
\label{sec:ColorCurvatureAnisotropicDiffusion}

\input RGBCurvatureAnisotropicDiffusionImageFilter.tex



\section{Distance Map}
\label{sec:DistanceMap}

\input DanielssonDistanceMapImageFilter.tex



\section{Geometrical Transformations}
\label{sec:GeometricalTransformationFilters}

\subsection{Resample Image Filter}
\label{sec:ResampleImageFilter}

\subsubsection{Introduction}
\input ResampleImageFilter.tex

\subsubsection{Importance of Spacing and Origin}
\input ResampleImageFilter2.tex

\subsubsection{A full example}
\input ResampleImageFilter3.tex



