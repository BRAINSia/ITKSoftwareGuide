\chapter{Introduction}
\label{chapter:Introduction}

Welcome to the \emph{Insight Segmentation and Registration Toolkit (ITK)
Software Guide}. This book has been updated for ITK 1.1 and later versions of
the \emph{Insight Toolkit} software.

ITK is an open-source, object-oriented software system for image processing,
segmentation, and registration.  Although it is large and complex, ITK is
designed to be easy to use once you learn about its basic object-oriented and
implementation methodology. The purpose of this \emph{Software Guide} is
to help you learn just this, plus familiarize you with an important
algorithms and data representations found throughout the toolkit. The material
is taught using an extensive set of examples, which we encourage you to compile
and run while you read this guide.

ITK is a large system. As a result, it is not possible to completely document
all ITK objects and their methods in this text. Instead, this guide will
introduce you to important system concepts and lead you up the learning curve
as fast and efficiently as possible. Once you master the basics, we suggest
that you take advantage of the many resources available including the Doxygen
doumentation pages (\url{http://www.itk.org/HTML/Documentation.htm}) and
the community of ITK users (see \ref{sec:AdditionalResources} on page 
\pageref{sec:AdditionalResources}.)

The \emph{Insight Toolkit} is an open-source software system. What this means
is that the community of ITK users and developers has great impact on the
evolution of the software. Users and developers can contribute greatly to ITK
by providing bug reports, bug fixes, tests, new classes, and other
feedback. Please feel free to contribute your ideas to the community (the ITK
mailing list is the preferred method).

\section{Organization}
\label{sec:Organization}

This software guide is divided into three parts, each of which is further
divided into several chapters. Part I is a general introduction to ITK,
including---in the next chapter---a description of how to install the Insight
Toolkit on your computer. This includes installing pre-compiled libraries and
executables, and compiling the software from the source code. Part I also
introduces basic system concepts including an overview of the system
architecture, and how to build applications in the C++ and Tcl programming
languages. Part II describes the system from the user point of view. Dozens
of examples are used to illustrate important system features. Part III is for
the ITK developer. Part III explains how to create your own classes, extend
the system, and interface to various windowing and GUI systems.

\section{How to Learn ITK}
\label{sec:HowToLearnITK}

There are two broad categories of users of ITK. First are class developers,
those who create classes in C++. Second, users, employ existing C++ classes
to build applications. Class developers must be proficient in C++, and if you
are extending or modifying ITK, you must also be familiar with ITK's internal
structures and design (material covered in Part III). Users may or may not
use C++, since the compiled C++ class library has been \emph{wrapped} with
the Tcl interpreted language. However, as a user you must understand the
external interface to ITK classes and the relationships between them.

The key to learning how to use ITK is to become familiar with its palette of
objects and the ways of combining them. If you are a new \emph{Insight
Toolkit} user, begin by installing the software. If you are a class
developer, you'll want to install the source code and then compile it. Users
may only need the precompiled binaries and executables. We recommend that you
learn the system by studying the examples (if you are a user) and then study
the source code (if you are a class developer). Start by reading Chapter 3,
which provides an overview of some of the key concepts in the system, and
then review the examples in Part II. You may also wish to compile and run the
dozens of examples distributed with the source code found in the directory
\code{Insight/Examples}. (Please see the file 
\code{Insight/Examples/README.txt} for
a description of the examples contained in the various subdirectories.) There
are also several hundred tests found in the source distribution in 
\code{Insight/Testing/Code}, most of which are minimally documented
testing scripts. However, they may be useful to see how classes are used
together in ITK.

\section{Software Organization}
\label{sec:SoftwareOrganization}

The following sections describe the directory contents, summarize the
software functionality in each directory, and locate the documentation and
data.

\subsection{Obtaining the Software}
\label{sec:ObtainingTheSoftware}

There are three different ways to access the ITK source code.
\begin{enumerate}
	\item	from the companion CD-ROM accompanying this text;
	\item	from periodic releases available on the ITK Web site 
                http://www.itk.org; and
	\item	from direct access to the CVS source code repository 
                (instructions also found at http://www.itk.org).
\end{enumerate}
(In general, the periodic releases and CD-ROM releases are the same, except
that the CD release typically contains additional resources and data.)

This \emph{Software Guide} assumes that you are working with the official ITK
version 1.1 release. To begin with, we highly recommend that you use this
version of the software. It is stable, consistent, and better tested than the
code available from the CVS repository. Later, as you gain experience with
ITK, you may wish to work from the CVS repository. However, if you work from
the repository, please be aware of the ITK quality testing dashboard. The
\emph{Insight Toolkit} is heavily tested using the open-source DART
regression testing system (http://public.kitware.com/dashboard.php). Before
updating the CVS repository, make sure that the dashboard is \emph{green}
indicating stable code. If not green it is likely that your software update
is unstable. (Learn more about the ITK quality dashboard in Section
\ref{sec:DART} on page \pageref{sec:DART}.)


\subsection{Directory Structure}
\label{sec:DirectoryStructure}

To begin your ITK odyssey, you will first need to know something about ITK's
software organization and directory structure. Even if you are installing
pre-compiled binaries, it is helpful to know enough to navigate through the
code base to find examples, code, and documentation.

ITK is organized into several different modules, or CVS checkouts. If you are
using an official release or CD release, you will see two important modules:
the \code{Insight} and \code{InsightDocuments} modules. The source code,
examples and applications are found in the \code{Insight} module;
documentation, tutuorials, and material related to the design and marketing
of ITK are found in \code{InsightDocuments}. Usually you will work with the 
\code{Insight} module unless you are a developer, are teaching a course, or
are looking for the details of various design documents.

The \code{InsightDocuments} module contains the following subdirectories:
\begin{itemize}
        \item \code{InsightDocuments/CourseWare}---material related to
        teaching ITK.
        \item \code{InsightDocuments/Developer}---historical documents covering
        the design and creation of ITK including progress reports and 
        design documents.
        \item \code{InsightDocuments/Latex}---\LaTeX{} styles to produce this
        \emph{User's Guide} as well as other documents.
        \item \code{InsightDocuments/Marketing}---marketing flyers and 
        literature used to succinctly describe ITK.
        \item \code{InsightDocuments/Papers}---papers related to the many
        algorithms, data representations, and software tools used in ITK.
        \item \code{InsightDocuments/SoftwareGuide}---\LaTeX{} files used to
        create this \emph{Software Guide}. (Note that the code found in
        \code{Insight/Examples} is used in conjunction with these \LaTeX{}
        files.)
        \item \code{InsightDocuments/Validation}---validation case studies
        using ITK.
        \item \code{InsightDocuments/Web}---the source HTML and other material
        used to produce the Web pages found at \code{http://www.itk.org}.
\end{itemize}

The \code{Insight} module contains the following subdirectories:
\begin{itemize}
        \item \code{Insight/Applications}---large, relatively complex examples
        of ITK usage. Some of these applications include GUI's and use other
        packages such as VTK (\emph{The Visualization Toolkit} 
        \code{http://www.vtk.org}).
        \item \code{Insight/Auxiliary}---
        \item \code{Insight/Code}---the heart of the software; the location
        of the majority of the source code.
        \item \code{Insight/Documentation}---a compact subset of documentation
        to get ITK users started.
        \item \code{Insight/Examples}---a suite of simple, well-documented
        examples used by this \emph{Software Guide} and to illustrate important
        ITK concepts.
        \item \code{Insight/Testing}---a large number of small programs used
        to test ITK. These examples tend to be minimally documented but may
        be useful to demonstrate various concepts. These tests are used by DART
        to produce the ITK Quality Dashboard (see Section \ref{sec:DART} on 
        page \pageref{sec:DART}.)
        \item \code{Insight/Utilities}---supporting software for the ITK
        source code. For example, DART and Doxygen support, as well as 
        libraries such as \code{png} and \code{zlib}.
        \item \code{Insight/Validation}---a series of validation case studies
        including the source code used to produce the results.
        \item \code{Insight/Wrapping}---support for the CABLE wrapping tool.
        CABLE is used by ITK to build interfaces between the C++ library and
        various interpreted languages (currently Tcl is supported).
\end{itemize}

The source code directory structure---found in \code{Insight/Code}---is 
important to understand since other directory structures (such as the
\code{Testing} and \code{Wrapping} directories) shadow the structure of the
\code{Insight/Code} directory.
\begin{itemize}
        \item \code{Insight/Code/Common}---core classes, macro definitions,
        typedefs, and other software constructs central to ITK.
        \item \code{Insight/Code/Numerics}---mathematical library and
        supporting classes. (Note: ITK's mathematical library is based
        on the VXL/VNL software package \code{http://vxl.sourceforge.net}.)
        \item \code{Insight/Code/BasicFilters}---basic image processing
        filters.
        \item \code{Insight/Code/IO}---classes that support the reading
        and writing of data.
        \item \code{Insight/Code/Algorithms}---the location of most 
        segmentation and registration algorithms.
        \item \code{Insight/Code/SpatialObject}---classes that represent
        and organize data using spatial relationships (e.g., the leg bone
        is connected to the hip bone, etc.)
        \item \code{Insight/Code/Patented}---any patented algorithms are
        placed here. Using this code in commercial application requires
        a patent licence.
        \item \code{Insight/Code/Local}---an empty directory used by developers
        and users to experiment with new code.
\end{itemize}

\subsection{Documentation}
\label{sec:Documentation}

Besides this text, there are other documentation resources that you should be
aware of.
\begin{description}
        \item[Doxygen Documentation.] The Doxygen documentation is an
        essential resource when working with ITK. These extensive Web pages
        describe in detail every class and method in the system. The
        documentation also contains inheritance and collaboration diagrams,
        listing of event invocations, and data members. The documentation is
        heavily hyper-linked to other classes and to the source code. The
        Doxygen documentation is available on the companion CD, or on-line at
        http://www.itk.org. Make sure that you have the right documentation
        for your version of the source code.

	\item[Header Files.] Each ITK class is implemented with a .h and
        .cxx/.txx file (.txx file for templated classes). All methods
        found in the .h header files are documented and provide a quick way
        to find documentation for a particular method. (Indeed, Doxygen uses
        the header documentation to produces its output.)
\end{description}

\subsection{Data}
\label{sec:Data}

\emph{The Insight Toolkit} was designed to support the Visible Human Project 
and its associated data. This data is available from the National Library of
Medicine at \code{http://www.nlm.nih.gov/research/visible/visible\_human.html}.

Another source of data can be obtained from the ITK Web site at 
\code{http://www.itk.org/HTML/Data.htm} or via ftp from
\code{ftp://public.kitware.com/pub/itk/Data/}.

\section{Additional Resources}
\label{sec:AdditionalResources}

For more information about the \emph{Insight Toolkit} we recommend the
following resources.

\begin{itemize}
	\item The Web pages \code{http://www.itk.org} contain pointers to
	many other resources such as on-line manual pages, a FAQ, and an
	archive of the insight-users mailing list (see below). In particular,
	the Doxygen manual pages are absolutely wonderful. They are 
        available online at \code{http://www.itk.org/Doxygen/html/index.html}.

	\item The insight-users mailing list allows users and developers to ask
	questions and receive answers; post updates, bug fixes, and
	improvements; and offer suggestions for improving the system. There
	are instructions at 
        \code{http://www.itk.org/mailman/listinfo/insight-users}
	describing how to join this list.

        \item Research partnerships with members of the Insight Software
        Consortium are encouraged. Please see the web pages for more 
        information.

	\item Commercial support and consulting are available from Kitware at
	http://www.kitware.com. 
\end{itemize}

\section{A Brief History of ITK}
\label{sec:History}

\index{ITK!history|textbf}

In 1999 the US National Library of Medicine of the National Institutes of
Health awarded a three-year contract to develop an open-source registration
and segmentation toolkit, which eventually came to be known as the Insight
Toolkit (ITK). ITK's NLM Project Manager was Dr. Terry Yoo, who coordinated
the six prime contractors who made up the Insight consortium. These
consortium members included three commercial partners---GE Corporate R\&D,
Kitware, Inc., and MathSoft (the company name is now Insightful)---and three
academic partners---University of North Carolina (UNC), University of
Tennessee (UT) (Ross Whitaker subsequently moved to University of Utah), and
University of Pennsylvania (UPenn). The Principle Investigators for these
partners were, respectively, Bill Lorensen at GE CRD, Will Schroeder at
Kitware, Vikram Chalana at Insightful, Stephen Aylward with Luis Ibanez at
UNC (Luis is now at Kitware), Ross Whitaker with Josh Cates at UT (both now
at Utah), and Dimitri Metaxas at UPenn. In addition, several subcontractors
rounded out the consortium including Peter Raitu at Brigham \& Women's
Hospital, Celina Imielinska and Pat Molholt at Columbia University, Jim Gee
at UPenn's Grasp Lab, and George Stetton at University of Pittsburgh.

In 2002 the first official public release of ITK was made available. In
addition, the National Library of Medicine awarded thirteen contracts to
several organizations to extend ITK's capabilities. NLM funding of 
\emph{Insight Toolkit} development is continuing through 2003, with additional
application and maintenance support anticipated beyond 2003.
