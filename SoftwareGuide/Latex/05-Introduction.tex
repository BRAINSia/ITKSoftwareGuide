\chapter{Welcome}
\label{chapter:Introduction}

Welcome to the \emph{Insight Segmentation and Registration Toolkit (ITK)
Software Guide}. This book has been updated for ITK 4.0 and later versions of
the Insight Toolkit software.

ITK is an open-source, object-oriented software system for image processing,
segmentation, and registration.  Although it is large and complex, ITK is
designed to be easy to use once you learn about its basic object-oriented and
implementation methodology. The purpose of this Software Guide is
to help you learn just this, plus to familiarize you with the important
algorithms and data representations found throughout the toolkit. The material
is taught using an extensive set of examples that we encourage you to compile
and run while you read this guide.

ITK is a large system. As a result it is not possible to completely document
all ITK objects and their methods in this text. Instead, this guide will
introduce you to important system concepts and lead you up the learning curve
as fast and efficiently as possible. Once you master the basics, we suggest
that you take advantage of the many resources available including the Doxygen
documentation pages (\url{http://www.itk.org/ITK/help/documentation.html}) and
the community of ITK users (see Section \ref{sec:AdditionalResources} on page
\pageref{sec:AdditionalResources}.)

The Insight Toolkit is an open-source software system. What this means
is that the community of ITK users and developers has great impact on the
evolution of the software. Users and developers can make significant
contributions to ITK by providing bug reports, bug fixes, tests, new classes,
and other feedback. Please feel free to contribute your ideas to the
community (the ITK user mailing list is the preferred method; a developer's
mailing list is also available).

\section{Organization}
\label{sec:Organization}

This software guide is divided into three parts, each of which is further
divided into several chapters. Part I is a general introduction to ITK,
with---in the next chapter---a description of how to install the Insight
Toolkit on your computer. This includes installing pre-compiled libraries and
executables, and compiling the software from the source code. Part I also
introduces basic system concepts such as an overview of the system
architecture, and how to build applications in the C++, Tcl, and Python programming
languages. Part II describes the system from the user point of view. Dozens
of examples are used to illustrate important system features. Part III is for
the ITK developer. Part III explains how to create your own classes, extend
the system, and interface to various windowing and GUI systems.

\section{How to Learn ITK}
\label{sec:HowToLearnITK}

There are two broad categories of users of ITK. First are class
developers, those who create classes in C++. The second, users, employ
existing C++ classes to build applications. Class developers must be
proficient in C++, and if they are extending or modifying ITK, they
must also be familiar with ITK's internal structures and design
(material covered in Part III). Users may or may not use C++, since
the compiled C++ class library has been \emph{wrapped} with the Tcl
and Python interpreted languages. However, as a user you must
understand the external interface to ITK classes and the relationships
between them.

The key to learning how to use ITK is to become familiar with its palette of
objects and the ways of combining them. If you are a new Insight
Toolkit user, begin by installing the software. If you are a class
developer, you'll want to install the source code and then compile it. Users
may only need the precompiled binaries and executables. We recommend that you
learn the system by studying the examples and then, if you are a class
developer, study
the source code. Start by reading Chapter 3,
which provides an overview of some of the key concepts in the system, and
then review the examples in Part II. You may also wish to compile and run the
dozens of examples distributed with the source code found in the directory
\code{Insight/Examples}. (Please see the file
\code{Insight/Examples/README.txt} for
a description of the examples contained in the various subdirectories.) There
are also several hundred tests found in the source distribution in
\code{Insight/Testing/Code}, most of which are minimally documented
testing code. However, they may be useful to see how classes are used
together in ITK, especially since they are designed to exercise as
much of the functionality of each class as possible.

\section{Software Organization}
\label{sec:SoftwareOrganization}

The following sections describe the directory contents, summarize the
software functionality in each directory, and locate the documentation and
data.

\subsection{Obtaining the Software}
\label{sec:ObtainingTheSoftware}

There are two different ways to access the ITK source code
(see Section \ref{sec:DownloadingITK} on page \pageref{sec:DownloadingITK}).
\begin{enumerate}
	\item	from periodic releases available on the ITK Web site,
	\item	from direct access to the Git source code repository.
\end{enumerate}
Official releases are available a few times a year and announced on the ITK
Web pages and mailing lists. However, they may not provide the latest and
greatest features of the toolkit. Git access provides immediate access to the
latest toolkit additions, but on any given day the source code may not be
stable as compared to the official releases---i.e., the code may not compile,
it may crash, or it might even produce incorrect results.

This software guide assumes that you are using the current released
version of ITK, available on the ITK Web site. If you are a new user,
we highly recommend that you use the released version of the
software. It is stable, consistent, and better tested than the code
available from the Git repository. Later, as you gain experience with
ITK, you may wish to work from the Git repository. However, if you do
so, please be aware of the ITK quality testing dashboard. The Insight
Toolkit is heavily tested using the open-source CDash regression
testing system
(\url{http://public.kitware.com/dashboard.php?name=itk}). Before
updating the Git repository, make sure that the dashboard is
\emph{green} indicating stable code. If not green it is likely that
your software update is unstable. (Learn more about the ITK quality
dashboard in Section \ref{sec:CDash} on page \pageref{sec:CDash}.)

\section{Downloading ITK}
\label{sec:DownloadingITK}

\index{Downloading}

ITK can be downloaded without cost from the following web site:
\begin{center}
  \url{http://www.itk.org/ITK/resources/software.html}
\end{center}

You can get the tarball of a stable release or you can get the
development version through Git.  The release version is stable and
dependable but may lack the latest features of the toolkit. The Git
version will have the latest additions but is inherently unstable and
may contain components with work in progress.  The following sections
describe the details of each one of these two alternatives.

\subsection{Downloading Packaged Releases}
\label{sec:DownloadingReleases}

\index{ITK!downloading release}

Please read the
\code{Getting Started}\footnote{http://www.itk.org/Wiki/ITK/Getting\_Started}
Wiki pages first. It will give you an overview of the download and installation
processes. Then choose the tarball that better fits your system. The options
are \code{.zip} and \code{.tgz} files.  The first type is better suited for
MS-Windows while the second one is the preferred format for UNIX systems.

Once you unzip or untar the file a directory called \code{InsightToolkit-4.3.2} will be
created in your disk and you will be ready for starting the configuration
process described in Section \ref{sec:CMakeforITK} on page
\pageref{sec:CMakeforITK}.

\subsection{Downloading using Git}
\label{sec:DownloadingFromGit}

\index{ITK!Git repository}

Git is a free and open source distributed version control system.
Generally only developers should be using Git, so here we
assume that you know what Git is and how to use it.  For more information
about Git please see Section \ref{sec:GitRepository} on page
\pageref{sec:GitRepository}. (Note: please make sure that you access the
software via Git only when the ITK Quality Dashboard indicates that the
code is stable. Learn more about the Quality Dashboard at
\ref{sec:QualityDashboard} on page \pageref{sec:QualityDashboard}.)

Access ITK via Git using the following commands (under UNIX and Cygwin):
\begin{verbatim}
git clone git://itk.org/ITK.git
\end{verbatim}

This will trigger the download of the software into a directory named
\code{ITK}.  Any time you want to update your version, it will be enough to
change into this directory \code{Insight} and type:
\begin{verbatim}
git pull
\end{verbatim}

Once you obtain the software you are ready to configure and compile it (see
Section \ref{sec:CMakeforITK} on page \pageref{sec:CMakeforITK}). First,
however, we recommend that you join the mailing list and read the following
sections describing the organization of the software.

\subsection{Join the Mailing List}
\label{sec:JoinMailList}

\index{ITK!mailing list}
\index{mailing list}

It is strongly recommended that you join the users mailing list. This is one
of the primary resources for guidance and help regarding the use of the
toolkit. You can subscribe to the users list online at

\begin{center}
\url{http://www.itk.org/ITK/help/mailing.html}
\end{center}

The insight-users mailing list is also the best mechanism for expressing your
opinions about the toolkit and to let developers know about features that you
find useful, desirable or even unnecessary. ITK developers are committed to
creating a self-sustaining open-source ITK community. Feedback from users is
fundamental to achieving this goal.

\subsection{Directory Structure}
\label{sec:DirectoryStructure}

To begin your ITK odyssey, you will first need to know something about
ITK's software organization and directory structure. It is helpful to
know enough to navigate through the code base to find examples, code,
and documentation.

ITK is organized into Git Repositories. The source code, examples and
applications are found in the
\code{ITK}\footnote{http://http://itk.org/ITK.git} git
repository. Fairly complex applications using ITK (and other systems
such as VTK, Qt, and FLTK) are available from
\code{InsightApplications}\footnote{http://itk.org/ITKApps.git}. Usually
you will work with the \code{ITK} module. The \code{InsightApplications} module should
only be downloaded and compiled once the \code{Insight} module is
functioning properly.

The \code{ITK} repository contains the following subdirectories:
\begin{itemize}
        \item \code{ITK/Modules} ---the heart of the software; the location
        of the majority of the source code.
        \item \code{ITK/Documentation}---a compact subset of documentation
        to get users started with ITK.
        \item \code{ITK/Examples}---a suite of simple, well-documented
        examples used by this guide and to illustrate important
        ITK concepts.
        \item \code{ITK/Testing}---Contains the MD5 files, which are used
        to link with the ITK MIDAS server to download test data. This test data
        is used by tests in \code{ITK/Modules} to produce the ITK Quality Dashboard using CDash.
        (see Section \ref{sec:CDash} on
        page \pageref{sec:CDash}.)
        \item \code{Insight/Utilities}---supporting software for the ITK
        source code. For example, CTest and Doxygen support.
        \item \code{Insight/Wrapping}---support for ITK wrapping.
        It is used by ITK to build interfaces between the C++ library and
        various interpreted languages (currently Tcl and Python are supported).
\end{itemize}

The source code directory structure---found in \code{ITK/Modules}---is
important to understand since other directory structures (such as the
\code{Testing} and \code{Wrapping} directories) shadow the structure of the
\code{Insight/Code} directory.
\begin{itemize}
        \item \code{ITK/Modules/Core}---core classes, macro definitions,
        typedefs, and other software constructs central to ITK. The classes
        in \code{Core} are the only ones always compiled as part of ITK.
        \item \code{ITK/Modules/ThirdParty}--various third-party libraries
        that are used to implement Image File I/O and mathematical algorithms.
        (Note: ITK's mathematical library is based
        on the VXL/VNL software package \url{http://vxl.sourceforge.net}.)
        \item \code{ITK/Modules/Filtering}--image processing
        filters.
        \item \code{ITK/Modules/IO}---classes that support the reading
        and writing of images, transforms, and geometry
        \item \code{ITK/Modules/Bridge}---classes used to connect with the
        VTK Imaging toolkit \url{http://www.vtk.org}, which is used for
        graphic visualization of image.
        \item \code{ITK/Modules/Registration}---classes for registration of
        images to each other.
        \item \code{ITK/Modules/Segmentation}---classes for segmentation of
        images.
        \item \code{ITK/Modules/Video}---classes that implement time-based
        imaging.
        \item \code{ITK/Modules/Compatibility}---collects together classes
        for backwards compatibility with ITK Version 3, and classes that are
        deprecated -- i.e. scheduled for removal from future versions of ITK.
        \item \code{ITK/Modules/External}---a special module that implements a
        method using CMake to download and include modules from outside the
        ITK Git repository.
        \item \code{ITK/Modules/Numerics}---a collection of numeric tools used
        by ITK classes to implement algorithms. Includes classes for FEM,
        Optimization, Statistics, Neural Networks, etc
\end{itemize}


The \code{ITKApps} module contains large, relatively complex
examples of ITK usage. See the web pages at
\url{http://www.itk.org/ITK/resources/applications.html} for a description. Some of
these applications require GUI toolkits such as Qt and FLTK or other packages
such as VTK (\emph{The Visualization Toolkit}
\url{http://www.vtk.org}). Do not attempt to compile and build this module
until you have successfully built the \code{ITK} libraries.

Similar to \code{ITK}, access to
the \code{ITKApps} module is also available via Git using the
following commands (under UNIX and Cygwin):
\begin{verbatim}
git clone http://itk.org/ITKApps.git
\end{verbatim}

\subsection{Documentation}
\label{sec:Documentation}

Besides this text, there are other documentation resources that you should be
aware of.
\begin{description}
        \item[Doxygen Documentation.] The Doxygen documentation is an
        essential resource when working with ITK. These extensive Web pages
        describe in detail every class and method in the system. The
        documentation also contains inheritance and collaboration diagrams,
        listing of event invocations, and data members. The documentation is
        heavily hyper-linked to other classes and to the source code. The
        Doxygen documentation is on-line at
        \url{http://www.itk.org}. Make sure that you have the right documentation
        for your version of the source code.

	\item[Header Files.] Each ITK class is implemented with a .h and
        .cxx/.hxx file (.hxx file for templated classes). All methods
        found in the .h header files are documented and provide a quick way
        to find documentation for a particular method. (Indeed, Doxygen uses
        the header documentation to produces its output.)
\end{description}

\subsection{Data}
\label{sec:Data}

The Insight Toolkit was designed to support the Visible Human Project
and its associated data. This data is available from the National Library of
Medicine at \url{http://www.nlm.nih.gov/research/visible/visible_human.html}.

Another source of data can be obtained from the ITK Web site at either
of the following:
\begin{quote}
\url{http://www.itk.org/ITK/resources/links.html} \\
\url{ftp://public.kitware.com/pub/itk/Data/}.
\end{quote}

\section{The Insight Community and Support}
\label{sec:AdditionalResources}

ITK was created from its inception as a collaborative, community
effort. Research, teaching, and commercial uses of the toolkit are
expected. If you would like to participate in the community, there are a
number of possibilities.

\begin{itemize}
       \item Users may actively report bugs, defects in the system API,
       and/or submit feature requests. Currently the best way to do this is
       through the ITK users mailing list.

       \item Developers may contribute classes or improve existing
       classes. If you are a developer, you may request permission to join
       the ITK developers mailing list. Please do so by sending email to
       will.schroeder ``at'' kitware.com. To become a developer you need to
       demonstrate both a level of competence as well as
       trustworthiness. You may wish to begin by submitting fixes to the ITK
       users mailing list.

       \item Research partnerships with members of the Insight Software
       Consortium are encouraged. Both NIH and NLM will likely provide
       limited funding over the next few years, and will encourage the use of
       ITK in proposed work.

       \item For those developing commercial applications with ITK,
       support and consulting are available from Kitware at
       \url{http://www.kitware.com}. Kitware also offers short ITK courses
       either at a site of your choice or periodically at Kitware.

       \item Educators may wish to use ITK in courses. Materials are being
       developed for this purpose, e.g., a one-day, conference course and
       semester-long graduate courses. Watch the ITK web pages or check in
       the \code{InsightDocuments/CourseWare} directory for more information.
\end{itemize}

\section{A Brief History of ITK}
\label{sec:History}

\index{ITK!history}
%% TODO:  History needs to be updated.
In 1999 the US National Library of Medicine of the National Institutes of
Health awarded six three-year contracts to develop an open-source
registration and segmentation toolkit, that eventually came to be known as
the Insight Toolkit (ITK) and formed the basis of the Insight Software
Consortium. ITK's NIH/NLM Project Manager was Dr. Terry Yoo, who coordinated the
six prime contractors composing the Insight consortium. These consortium
members included three commercial partners---GE Corporate R\&D, Kitware,
Inc., and MathSoft (the company name is now Insightful)---and three academic
partners---University of North Carolina (UNC), University of Tennessee (UT)
(Ross Whitaker subsequently moved to University of Utah), and University of
Pennsylvania (UPenn). The Principle Investigators for these partners were,
respectively, Bill Lorensen at GE CRD, Will Schroeder at Kitware, Vikram
Chalana at Insightful, Stephen Aylward with Luis Ib'{a}~{n}ez at UNC (Luis is now
at Kitware), Ross Whitaker with Josh Cates at UT (both now at Utah), and
Dimitri Metaxas at UPenn (now at Rutgers). In addition, several
subcontractors rounded out the consortium including Peter Raitu at Brigham \&
Women's Hospital, Celina Imielinska and Pat Molholt at Columbia University,
Jim Gee at UPenn's Grasp Lab, and George Stetten at the University of
Pittsburgh.

In 2002 the first official public release of ITK was made available. In
addition, the National Library of Medicine awarded thirteen contracts to
several organizations to extend ITK's capabilities. NLM funding of
Insight Toolkit development is continuing through 2003, with additional
application and maintenance support anticipated beyond 2003. If you are
interested in potential funding opportunities, we suggest that you contact
Dr. Terry Yoo at the National Library of Medicine for more information.
