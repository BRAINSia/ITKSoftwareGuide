\chapter{Welcome}
\label{chapter:Introduction}

Welcome to the \emph{Insight Segmentation and Registration Toolkit (ITK)
Software Guide}. This book has been updated for ITK \ITKVERSIONMAJORMINOR
\ and later versions of the Insight Toolkit software.

ITK is an open-source, object-oriented software system for image processing,
segmentation, and registration.  Although it is large and complex, ITK is
designed to be easy to use once you learn about its basic object-oriented and
implementation methodology. The purpose of this Software Guide is
to help you learn just this, plus to familiarize you with the important
algorithms and data representations found throughout the toolkit.

ITK is a large system. As a result, it is not possible to completely document
all ITK objects and their methods in this text. Instead, this guide will
introduce you to important system concepts and lead you up the learning curve
as fast and efficiently as possible. Once you master the basics, take
advantage of the many resources available
(\url{http://www.itk.org/ITK/help/documentation.html}), including example
materials, which provide cookbook recipes that concisely demonstrate how to
achieve a given task, the Doxygen pages, which document the specific algorithm
parameters, and the knowledge of the many ITK community members (see Section
\ref{sec:AdditionalResources} on page \pageref{sec:AdditionalResources}.)

The Insight Toolkit is an open-source software system. This means that the
community surrounding ITK has a great impact on the evolution of the software.
The community can make significant contributions to ITK by providing code
reviews, bug patches, feature patches, new classes, documentation, and
discussions. Please feel free to contribute your ideas through the ITK
community mailing list.

\section{Organization}
\label{sec:Organization}

This software guide is divided into three parts, each of which is further
divided into several chapters. Part I is a general introduction to ITK,
with---in the next chapter---a description of how to install the Insight
Toolkit on your computer. This includes how to build the library from its
source code. Part I also introduces basic system concepts such as an overview
of the system architecture, and how to build applications in the C++ and
Python programming languages. Part II describes the design of data structures
and application of analysis methods within the system.  An organized survey of
algorithms available is presented, and examples are used to illustrate
important system features.  Part III is for the ITK contributor. Part III
explains how to create your own classes, extend the system, and be an active
participant in the project.

\section{How to Learn ITK}
\label{sec:HowToLearnITK}

The key to learning how to use ITK is to become familiar with its palette of
objects and the ways to combine them. There are three categories of
documentation to help with the learning process: high level guidance material
(the Software Guide), "cookbook" demonstrations on how to achieve concrete objectives
particular objectives (the examples), and detailed descriptions of the
application programming interface (the
Doxygen\footnote{\url{http://itk.org/Doxygen/index.html}} documentation). These
resources are combined in the three recommended stages for learning ITK.

In the first stage, thoroughly read this Introduction, which provides an
overview of some of the key concepts of the system. It also provides guidance
on how to build and install the software. After running your first "hello
world" program, you are well on your way to advanced computational image
analysis!

The next stage is to execute a few examples and gain familiarity with the
available documentation.  By running the examples, one can gain confidence
in achieving results and is introduced the mechanics of the software system.
There are three example resources,
\begin{enumerate}
  \item	the \code{Examples} directory of the ITK source code repository \footnote{\ref{sec:DownloadingITK}}.
  \item the Examples pages on the ITK Wiki \footnote{\url{http://itk.org/Wiki/ITK/Examples}}
  \item	the Sphinx documented ITK Examples \footnote{\url{http://itk.org/ITKExamples}}
\end{enumerate}
To gain familiarity with the available documentation, browse the sections
available in Part II and Part III of this guide. Also, browse the Doxygen
application programming interface (API) documentation for the classes applied
in the examples.

Finally, mastery of ITK involves integration of information from multiple
sources. Part II of this guide is a reference to algorithms available, and
Part III introduces how to extend them to your needs and participate in the
community. Individual examples are a detailed starting point to achieve
certain tasks.  In practice, the Doxygen documentation becomes a frequent
reference as an index of the classes available, their descriptions, and the
syntax and descriptions of their methods.  When examples and Doxygen
documentation are insufficient, the software unit tests thoroughly demonstrate
how the code is utilized. Last, but not least, the source code itself
is an extremely valuable resource. The code is the most detailed, up-to-date, and
definitive description of the software. A great deal of attention and effort
is directed to the code's readability, and its value cannot be understated.

The following sections describe how to obtain the software, summarize the
software functionality in each directory, and how to locate data.

\section{Obtaining the Software}
\label{sec:ObtainingTheSoftware}
\label{sec:DownloadingITK}
\index{Downloading}

There are two different ways to access the ITK source code:
\begin{description}
  \item[Periodic releases]{Official releases are available on the ITK web
    site\footnote{\url{http://itk.org/}}. Official releases are available
    a twice a year and announced on the ITK web pages and mailing lists.
    However, they may not provide the latest and greatest features of the
    toolkit.}
  \item[Continuous repository checkout]{Direct access to the Git source code
    repository\footnote{\url{http://itk.org/ITK.git}} provides immediate
    availability to the latest toolkit additions. But, on any given day the
    source code may not be stable as compared to the official releases.}
\end{description}

This software guide assumes that you are using the current released version of
ITK, available on the ITK web site. If you are a new user, we recommend the
released version of the software. It is stable, consistent, and better tested
than the code available from the Git repository.  When working from the
repository, please be aware of the ITK quality testing dashboard.  The Insight
Toolkit is heavily tested using the open-source CDash regression testing
system\footnote{\url{http://open.cdash.org/index.php?project=Insight}}.  Before
updating the repository, make sure that the dashboard is \emph{green}
indicating stable code. If not green it is likely that your software update is
unstable. (Learn more about the ITK dashboard and quality assurance process in
Section \ref{sec:CDash} on page \pageref{sec:CDash}.)

\subsection{Downloading Packaged Releases}
\label{sec:DownloadingReleases}

\index{ITK!downloading release}

ITK can be downloaded without cost from the following web site:
\begin{center}
  \url{http://www.itk.org/ITK/resources/software.html}
\end{center}

Then choose the tarball that better fits your system. The options are
\code{.zip} and \code{.tar.gz} files.  The first type is better suited for
Microsoft-Windows while the second one is the preferred format for UNIX
systems.

Once you unzip or untar the file a directory called
\code{InsightToolkit-\ITKVERSIONMAJORMINOR.0} will be created in your disk and
you will be ready for starting the configuration process described in Section
\ref{sec:CMakeforITK} on page \pageref{sec:CMakeforITK}.

\subsection{Downloading From Git}
\label{sec:DownloadingFromGit}

\index{ITK!Git repository}

Git is a free and open source distributed version control system.  For more
information about Git please see Section \ref{sec:GitRepository} on page
\pageref{sec:GitRepository}. (Note: please make sure that you access the
software via Git only when the ITK quality dashboard indicates that the code
is stable.)

Access ITK via Git using the following commands (under a Git Bash shell):
\begin{verbatim}
git clone git://itk.org/ITK.git
\end{verbatim}

This will trigger the download of the software into a directory named
\code{ITK}.  Any time you want to update your version, it will be enough to
change into this directory, \code{ITK}, and type:
\begin{verbatim}
git pull
\end{verbatim}

Once you obtain the software you are ready to configure and compile it (see
Section \ref{sec:CMakeforITK} on page \pageref{sec:CMakeforITK}). First,
however, we recommend reading the following sections that describe the
organization of the software and joining the mailing list.

\subsection{Data}
\label{sec:Data}

The Insight Toolkit was designed to support the Visible Human Project
and its associated data. This data is available from the National Library of
Medicine at \url{http://www.nlm.nih.gov/research/visible/visible_human.html}.

Another source of data can be obtained from the ITK Web site at either
of the following:
\begin{quote}
\url{http://www.itk.org/ITK/resources/links.html} \\
\url{ftp://public.kitware.com/pub/itk/Data/}.
\end{quote}

\section{Software Organization}
\label{sec:SoftwareOrganization}

To begin your ITK odyssey, you will first need to know something about
ITK's software organization and directory structure. It is helpful to
know enough to navigate through the code base to find examples, code,
and documentation.

ITK resources are organized into multiple Git repositories. The ITK library source
code are in the \code{ITK}\footnote{\url{http://itk.org/ITK.git}} Git
repository. The sphinx Examples are in the
\code{ITKExamples}\footnote{\url{http://itk.org/ITKExamples.git}} repository.
Fairly complex applications using ITK (and other systems such as VTK, Qt, and
FLTK) are available from
\code{InsightApplications}\footnote{\url{http://itk.org/ITKApps.git}}
repository.  The sources for this guide are in the
\code{ITKSoftwareGuide}\footnote{\url{http://itk.org/ITKSoftwareGuide.git}}
repository.

The \code{ITK} repository contains the following subdirectories:
\begin{itemize}
        \item \code{ITK/Modules} --- the heart of the software; the location
        of the majority of the source code.
        \item \code{ITK/Documentation} --- some ancillary documentation
        material.
        \item \code{ITK/Examples} --- a suite of simple, well-documented
        examples used by this guide and to illustrate important
        ITK concepts.
        \item \code{ITK/Testing} --- a collection of the MD5 files, which are
used to link with the ITK data servers to download test data. This test data is
used by tests in \code{ITK/Modules} to produce the ITK Quality Dashboard using
CDash.
        (see Section \ref{sec:CDash} on page \pageref{sec:CDash}.)
        \item \code{Insight/Utilities} --- the scripts that support source code development. For example, CTest and Doxygen support.
        \item \code{Insight/Wrapping} --- the wrapping code to build interfaces between the C++ library and various interpreted languages (currently Python is supported).
\end{itemize}

The source code directory structure---found in \code{ITK/Modules}---is
the most important to understand.
\begin{itemize}
        \item \code{ITK/Modules/Core} --- core classes, macro definitions,
        typedefs, and other software constructs central to ITK. The classes
        in \code{Core} are the only ones always compiled as part of ITK.
        \item \code{ITK/Modules/ThirdParty} --- various third-party libraries
        that are used to implement image file I/O and mathematical algorithms.
        (Note: ITK's mathematical library is based
        on the VXL/VNL software
        package\footnote{\url{http://vxl.sourceforge.net}}.)
        \item \code{ITK/Modules/Filtering} --- image processing filters.
        \item \code{ITK/Modules/IO} --- classes that support the reading
        and writing of images, transforms, and geometry.
        \item \code{ITK/Modules/Bridge} --- classes used to connect with the
        other analysis libraries or visualization libraries, such as
        OpenCV\footnote{\url{http://opencv.org}} and
        VTK\footnote{\url{http://www.vtk.org}}.
        \item \code{ITK/Modules/Registration} --- classes for registration of
        images or other data structures to each other.
        \item \code{ITK/Modules/Segmentation} --- classes for segmentation of
        images or other data structures.
        \item \code{ITK/Modules/Video} --- classes for input, output and processing
        of static and real-time data with temporal components.
        \item \code{ITK/Modules/Compatibility} --- collects together classes
        for backwards compatibility with ITK Version 3, and classes that are
        deprecated -- i.e. scheduled for removal from future versions of ITK.
        \item \code{ITK/Modules/Remote} --- a group of modules distributed outside
        of the main ITK source repository (most of them are hosted on \url{github.com})
        whose source code can be downloaded via CMake when configuring ITK.
        \item \code{ITK/Modules/External} --- a directory to place in development
        or non-publicized modules.
        \item \code{ITK/Modules/Numerics} --- a collection of numeric modules, including
        FEM, Optimization, Statistics, Neural Networks, etc.
\end{itemize}

The Doxygen documentation is an essential resource when working with ITK, but
it is not contained in a separate repository. Each ITK class is implemented
with a \code{.h} and \code{.cxx}/\code{.hxx} file (\code{.hxx} file for
templated classes). All methods found in the \code{.h} header files are
documented and provide a quick way to find documentation for a particular
method.  Doxygen uses this header documentation to produce its HTML output.

The extensive Doxygen web pages describe in detail every class and method in
the system. It also contains inheritance and collaboration diagrams, listing
of event invocations, and data members.  heavily hyper-linked to other classes
and to the source code. The nightly generated Doxygen documentation is online at
\url{http://itk.org/Doxygen/html/}. Archived versions for each feature release
are also available online; for example, the documentation for the 4.4.0
release are available at \url{http://itk.org/Doxygen44/html/}.

The \code{ITKApps} contains large, relatively complex
examples of ITK usage. See the web pages at
\url{http://www.itk.org/ITK/resources/applications.html} for a description. Some of
these applications require GUI toolkits such as Qt and FLTK or other packages
such as VTK (\emph{The Visualization Toolkit}
\footnote{\url{http://www.vtk.org}}). It is recommend to set the CMake source directory
to \code{ITKApps/Superbuild} to build the dependent third-party applications.


\section{The Insight Community and Support}
\label{sec:AdditionalResources}
\label{sec:JoinMailList}

\index{ITK!mailing list}
\index{mailing list}

Joining the community mailing list is strongly recommended. This is one of the
primary resources for guidance and help regarding the use of the toolkit. You
can subscribe to the community list online at

\begin{center}
\url{http://www.itk.org/ITK/help/mailing.html}
\end{center}

ITK was created from its inception as a collaborative, community
effort. Research, teaching, and commercial uses of the toolkit are
expected. If you would like to participate in the community, there are a
number of possibilities.  For details on participation, see Part III.

\begin{itemize}
       \item Interaction with other community members is encouraged on the
       mailing lists by both asking as answering questions. When issues are
       discovered, patches submitted to the code review system are welcome.
       Performing code reviews, even by novice members, is encouraged.
       Improvements and extensions to the documentation are also welcome.

       \item Research partnerships with members of the Insight Software
       Consortium are encouraged. Both NIH and NLM will likely provide
       limited funding over the next few years and will encourage the use of
       ITK in proposed work.

       \item For those developing commercial applications with ITK, support
       and consulting are available from Kitware \footnote{\url{http://www.kitware.com}}.
       Kitware also offers short ITK courses either at a site of your choice
       or periodically at Kitware offices.

       \item Educators may wish to use ITK in courses. Materials are being
       developed for this purpose, e.g., a one-day, conference course and
       semester-long graduate courses. Check the
       Wiki\footnote{\url{http://itk.org/Wiki/ITK/Documentation}} for a listing.
\end{itemize}

\section{A Brief History of ITK}
\label{sec:History}

\index{ITK!history}
%% TODO:  History needs to be updated.
In 1999 the US National Library of Medicine of the National Institutes of
Health awarded six three-year contracts to develop an open-source
registration and segmentation toolkit, that eventually came to be known as
the Insight Toolkit (ITK) and formed the basis of the Insight Software
Consortium. ITK's NIH/NLM Project Manager was Dr. Terry Yoo, who coordinated the
six prime contractors composing the Insight consortium. These consortium
members included three commercial partners---GE Corporate R\&D, Kitware,
Inc., and MathSoft (the company name is now Insightful)---and three academic
partners---University of North Carolina (UNC), University of Tennessee (UT)
(Ross Whitaker subsequently moved to University of Utah), and University of
Pennsylvania (UPenn). The Principle Investigators for these partners were,
respectively, Bill Lorensen at GE CRD, Will Schroeder at Kitware, Vikram
Chalana at Insightful, Stephen Aylward with Luis Ib'{a}~{n}ez at UNC (Luis is now
at Kitware), Ross Whitaker with Josh Cates at UT (both now at Utah), and
Dimitri Metaxas at UPenn (now at Rutgers). In addition, several
subcontractors rounded out the consortium including Peter Raitu at Brigham \&
Women's Hospital, Celina Imielinska and Pat Molholt at Columbia University,
Jim Gee at UPenn's Grasp Lab, and George Stetten at the University of
Pittsburgh.

In 2002 the first official public release of ITK was made available. In
addition, the National Library of Medicine awarded thirteen contracts to
several organizations to extend ITK's capabilities. The NLM has funded
maintenance of the toolkit over the years, and a major funding effort was
started in July 2010 that culminated with the release of ITK 4.0.0 in
December 2011.  If you are interested in potential funding opportunities,
we suggest that you contact Dr. Terry Yoo at the National Library of Medicine
for more information.
