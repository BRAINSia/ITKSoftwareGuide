
\chapter{Registration}

\piccaption[2]{Image registration is the task of finding a spatial transform
  mapping on image into another.\label{fig:ImageRegistrationConcept}}
\parpic(8cm,3cm)[r]{\includegraphics[width=8cm]{ImageRegistrationConcept.eps}}
  
This chapter introduces the functionalities offered by Insight for performing
image registration. Image registration is the process in which we determine the
spatial transform that maps points from one image to homologous points on the
object in the second image. This concept is schematically represented in Figure
\ref{fig:ImageRegistrationConcept}. In the toolkit, registration is performed
within a framework of pluggable components that can easily be interchanged.
This flexibility means that a combinatorial variety of registration methods can
be created, allowing the user to pick and choose the right tools for the
application.


\section{Registration Framework}
The components of the registration framework and their interconnections 
are shown in Figure \ref{fig:RegistrationComponents}. The basic
input data to the registration process are two images: one
is defined as the \emph{Fixed} image $f(\bf{X})$ and the other defined as the
\emph{Moving} image $m(\bf{X})$. Registration is treated as an optimization problem
with the goal of finding the spatial mapping that will bring the moving image into 
alignment with the fixed or target image.

\begin{figure}
\center
\includegraphics[width=12cm]{RegistrationComponentsDiagram.eps}
\caption{The basic components of the registration framework are two input images,
a transform, a metric, an interpolator and an optimizer.}
\label{fig:RegistrationComponents}
\end{figure}

The \emph{Transform} component $T(\bf{X})$ represents the spatial mapping of points 
from the fixed image space to points in the moving image space. Note that this 
definition is inverse to the usual view of image transformation. Using the
\emph{inverse} transform is typical in registration as it avoids the potential
problems of "holes" with forward transform. The \emph{Interpolator} is used to
evaluate moving image intensity at non-grid positions. The \emph{Metric} component
$S(f,m \circ T)$ provides a measure of how well the fixed image is matched by 
the transformed moving image. This measure forms the quantitative criterion to be optimized 
by the \emph{Optimizer} over the search space defined by the parameters of the 
\emph{Transform}.

The various components available in the toolkit will be described in later sections.
First we begin with a simple registration example.

\section{Hello World Registration}
\label{sec:IntroductionImageRegistration}
\input{ImageRegistration1.tex}


\section{Transforms}
\label{sec:Transforms}
\input{Transforms.tex}

\section{Interpolators}
\label{sec:Interpolators}
\input{ImageInterpolators.tex}

\section{Metrics}
\label{sec:Metrics}
\input{ImageMetrics.tex}

\section{Optimizers}
\label{sec:Optimizers}

\chapter{Multi-Resolution Registration}
\label{sec:MultiResolutionRegistration}

\section{Image Pyramids}
\label{sec:ImagePyramids}


\section{Passage of parameters}
\label{sec:MultiResolutionParametersPassing}


